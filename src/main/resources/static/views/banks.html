
<h1 class="page-header">Bank</h1>

    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    List
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="table-responsive">

                        <table ng-table="table" show-filter="true" class="table table-striped table-bordered table-hover">
                            <colgroup>
                                <col width="50%" />
                            </colgroup>
                            <tbody>
                            <tr ng-repeat="row in $data">

                                <td title="'Name'" ng-switch="row.isEditing" ng-class="name.$dirty ? 'bg-warning' : ''" ng-form="name" demo-tracked-table-cell>
                                    <span ng-switch-default class="editable-text">{{row.name}}</span>
                                    <div class="controls" ng-class="name.$invalid && name.$dirty ? 'has-error' : ''" ng-switch-when="true">
                                        <input type="text" name="name" ng-model="row.name" class="editable-input form-control input-sm" required />
                                    </div>
                                </td>

                                <td title="'Country'" ng-switch="row.isEditing" ng-class="name.$dirty ? 'bg-warning' : ''" ng-form="name" demo-tracked-table-cell>
                                    <span ng-switch-default class="editable-text"><span class="flag-icon flag-icon-{{row.country.alpha2Code | lowercase}}"></span> {{row.country.name}}</span>
                                    <div class="controls" ng-class="name.$invalid && name.$dirty ? 'has-error' : ''" ng-switch-when="true">
                                        <select ng-model="row.country" ng-options="country.name for country in countries track by country.alpha3Code" class="form-control">
                                        </select>
                                    </div>
                                </td>

                                <td title="'Currencies'" ng-switch="row.isEditing" ng-class="name.$dirty ? 'bg-warning' : ''" ng-form="name" demo-tracked-table-cell>
                                   <span ng-switch-default class="editable-text"><span ng-repeat="currency in row.currencies"><span class="fa fa-{{currency.code | lowercase}} fa-fw"></span> {{currency.description}}{{$last ? '' : ', '}}</span></span>
                                    <div class="controls" ng-class="name.$invalid && name.$dirty ? 'has-error' : ''" ng-switch-when="true">
                                        <div
                                                isteven-multi-select
                                                input-model="currencies"
                                                output-model="row.currencies"
                                                button-label="code description"
                                                item-label="code description"
                                                tick-property="ticked"
                                                output-properties="code description"
                                        >
                                        </div>
                                    </div>
                                </td>

                                <td>
                                    <button class="btn btn-primary btn-sm" ng-click="save(row, rowForm)" ng-if="row.isEditing" ng-disabled="rowForm.$pristine || rowForm.$invalid"><span class="glyphicon glyphicon-ok"></span></button>
                                    <button class="btn btn-default btn-sm" ng-click="cancel(row, rowForm)" ng-if="row.isEditing"><span class="glyphicon glyphicon-remove"></span></button>
                                    <button class="btn btn-default btn-sm" ng-click="row.isEditing = true" ng-if="!row.isEditing"><span class="glyphicon glyphicon-pencil"></span></button>
                                    <button class="btn btn-danger btn-sm" ng-click="del(row)" ng-if="!row.isEditing"><span class="glyphicon glyphicon-trash"></span></button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- /.table-responsive -->
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
    </div>
    <!-- /.row -->

    <!-- /.row -->
    <div class="row">
        <div class="col-lg-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    Add a bank
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="table-responsive">
                        <form name="form" role="form">
                            <div class="form-group col-md-12">
                                <label>Bank name</label>
                                <input  ng-model="bank.name" class="form-control">
                            </div>
                            <div class="form-group col-md-6">
                                <label>Country</label>
                                <select ng-model="bank.country" ng-options="country.name for country in countries track by country.alpha3Code" class="form-control">
                                    <option value="">Select country</option>
                                </select>
                            </div>

                            <div class="form-group col-md-6">
                                <label>Currencies</label>

                                <div
                                        isteven-multi-select
                                        input-model="currencies"
                                        output-model="bank.currencies"
                                        button-label="code description"
                                        item-label="code description"
                                        tick-property="ticked"
                                        output-properties="code description"
                                >
                                </div>

                            </div>

                            <div class="form-group col-md-12">
                                <button type="submit" class="btn btn-primary"  ng-click="add(bank)">Add bank</button>
                                <button type="reset" class="btn btn-default" ng-click="reset()">Cancel</button>
                            </div>
                        </form>
                    </div>
                    <!-- /.table-responsive -->
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
    </div>
    <!-- /.row -->
